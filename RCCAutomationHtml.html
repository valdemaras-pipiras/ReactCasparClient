<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RCCAutomationHtml</title>
</head>
<!-- This is example file for automation of RCC
    There are three methods for this.

    recallPage
    updateData
    stopGraphics

-->

<body>
    <h1>RCCAutomationHtml</h1>
    <div style="display: flex;">
        <div>
            <button onclick="recallPage()">Call page</button>
        </div>
    
        <div>
            <button onclick="updateData()">updateData</button>
        </div>
        <div>
            <button onclick="stopGraphics()">stopGraphics</button>
        </div>
    
        <div>
            <label for="pageName">pageName:</label>
            <input type="text" id="pageName" name="pageName" value="Imageandname">
        </div>
    
        <div>
            <label for="fill">Select Fill Color:</label>
            <input type="color" id="fill" name="fill" value="#ff0000">
        </div>
        <div>
            <label for="backgroundColor">Select backgroundColor:</label>
            <input type="color" id="backgroundColor" name="backgroundColor" value="#ffff00">
        </div>
    
        <div>
            <label for="shadow">Select shadow:</label>
            <input type="color" id="shadow" name="shadow" value="#ff00ff">
        </div>
    </div>
  

   
<div style="background-color: blanchedalmond;">
  <label>initialMinute</label>  <input id="initialMinute" style="width: 20px;" type="text" value="30" />
  <label>initialSecond</label>  <input id="initialSecond" style="width: 20px;" type="text" value="50" />
  <label> CountUp<input type="checkbox" checked id='countUp' /></label>
    <button onclick="startGameTimer()">Show game Timer</button>
    <button onclick="pauseGameTimer()">Pause game Timer</button>
    <button onclick="resumeGameTimer()">Resume game Timer</button>
</div>
<div>
    <label>Row Commands</label>
   <br /> <textarea id='rowCommand' style="width: 500px; height: 150px;">
play 1-1 red
play 1-2 blue
mixer 1-2 fill .3 .4 .3 .4
    </textarea>
  <br />  <button onclick="sendAMCPCommand()">Send</button>
</div>
<div>
    <label id='demo'></label>
</div>
</body>
<!-- type values example -->
<!--  shadow: {
    color: 'black',
    blur: 30,
    offsetX: 0,
    offsetY: 0,
    affectStroke: false
},
        left: 10,
        top: 530,
        width: 100,
        fill: '#ffffff',
        backgroundColor: options.backgroundColor,
        fontFamily: options.currentFont,
        fontWeight: 'bold',
        fontSize: options.currentFontSize,
        editable: true,
        objectCaching: false,
        textAlign: 'center',
        stroke: '',
        strokeWidth: 0, -->
<script type="text/javascript">
    function recallPage() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("demo").innerHTML = this.responseText;
            }
        };
        xhttp.open("POST", "http://localhost:8080/recallPage", true);
        xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        var bb = Math.floor(Math.random() * 100)
        const aa = [{ key: "f0", value: `https://picsum.photos/id/${bb}/300/200`, type: "text" }, { key: "img1", value: `https://picsum.photos/id/${bb}/300/200`, type: "image" },{ key: "f0", value: document.querySelector("#fill").value, type: "fill" }, { key: "f0", value: document.querySelector("#backgroundColor").value, type: "backgroundColor" }, { key: "f0", value: {color:document.querySelector("#shadow").value}, type: "shadow" }]
        var params = `layerNumber=96&pageName=${document.querySelector("#pageName").value}&data=${JSON.stringify(aa)}`
        xhttp.send(params);
    };

    function updateData() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("demo").innerHTML = this.responseText;
            }
        };
        xhttp.open("POST", "http://localhost:8080/updateData", true);
        xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        var bb = Math.floor(Math.random() * 100)
        const aa = [{ key: "f0", value: `https://picsum.photos/id/${bb}/300/200`, type: "text" }, { key: "img1", value: `https://picsum.photos/id/${bb}/300/200`, type: "image" },{ key: "f0", value: document.querySelector("#fill").value, type: "fill" }, { key: "f0", value: document.querySelector("#backgroundColor").value, type: "backgroundColor" },{ key: "f0", value: {color:document.querySelector("#shadow").value}, type: "shadow" }]
        var params = `layerNumber=96&pageName=${document.querySelector("#pageName").value}&data=${JSON.stringify(aa)}`
        xhttp.send(params);
    };
    function stopGraphics() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("demo").innerHTML = this.responseText;
            }
        };
        xhttp.open("POST", "http://localhost:8080/stopGraphics", true);
        xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        var params = `layerNumber=96`
        xhttp.send(params);
    };
    function resumeGameTimer() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("demo").innerHTML = this.responseText;
            }
        };
        xhttp.open("POST", "http://localhost:8080/resumeGameTimer", true);
        xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        var params = `layerNumber=96&countUp=${document.querySelector("#countUp").checked }`
        xhttp.send(params);
    };
    
    function pauseGameTimer() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("demo").innerHTML = this.responseText;
            }
        };
        xhttp.open("POST", "http://localhost:8080/pauseGameTimer", true);
        xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        var params = `layerNumber=96`
        xhttp.send(params);
    };
function startGameTimer(){
    var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("demo").innerHTML = this.responseText;
            }
        };
        xhttp.open("POST", "http://localhost:8080/startGameTimer", true);
        xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        const aa = [{ key: "gameTimer1", value:document.querySelector("#initialMinute").value + ':' +document.querySelector("#initialSecond").value , type: "text"}]
      
        var params = `layerNumber=96&pageName=gametimer1&data=${JSON.stringify(aa)}&initialMinute=${document.querySelector("#initialMinute").value }&initialSecond=${document.querySelector("#initialSecond").value}&countUp=${document.querySelector("#countUp").checked }`
        xhttp.send(params);
}

const sendAMCPCommand = () => {
        let textArray = (document.querySelector("#rowCommand").value).split(/^/gm);
        textArray.splice(-1);
        textArray.forEach(element => {

            sendRowCommand(element)
        });
    }

const sendRowCommand=(element)=>{
    var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("demo").innerHTML = this.responseText;
            }
        };
        xhttp.open("POST", "http://localhost:8080/endpoint", true);
        xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        var params = `string=${element}`;
        xhttp.send(params);

}
</script>

</html>